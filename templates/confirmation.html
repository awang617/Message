{% extends "layout.html" %}

{% block content %}
<div class="container">
    <h2>Confirm your order</h2>
    <div class="row">
        <div class="col-6">
            <h3>Shipping</h3>
            <p>{{order.recipient_fname}} {{order.recipient_lname}}</p>
            <p>{{order.recipient_street_address}}</p>
            <p>{{order.recipient_city}}</p>
            <p>{{order.recipient_state}}</p>
            <p>{{order.recipient_postal_code}}</p>
            <a href="/shipping">Edit</a>
        </div>

        <div class="col-6">
            <h3>Billing</h3>
            <p>{{user.fname}} {{user.lname}}</p>
            <p>{{user.email}}</p>
            <p>{{user.street_address}}</p>
            <p>{{user.city}}</p>
            <p>{{user.state}}</p>
            <p>{{user.postal_code}}</p>
            <a href="/payment">Edit</a>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <h3>Your Order</h3>
            {% for item in cart %}
            <p>{{item.product.name}} ${{item.subtotal}}</p>
            <img src="{{item.product.image}}" style="height:200px; width: 200px">
            <p>QTY: {{item.quantity}}</p>
            {% endfor %}
            <p>Total: ${{order.total_cost}}</p>
        </div>
    </div>

    <!-- <a href="/checkout" class="button">Checkout</a> -->
    <form action="/checkout" method="POST">
        <script
            src="https://checkout.stripe.com/checkout.js" class="stripe-button"
            data-key="pk_test_0ZSmd03Ao5L3zGGWFPb784cH00jsfe5W5S"
            data-amount={{order.total_cost*100}}
            data-name="Message"
            data-description="Your order"
            data-image="https://stripe.com/img/documentation/checkout/marketplace.png"
            data-locale="auto">
        </script>
    </form>
    <a href="/cart" class="button">Return to Cart</a>
    <a href="/shop" class="button">Continue Shopping</a>

</div>

{% endblock %}